



<!doctype html>
<html lang="zh" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      <meta http-equiv="x-ua-compatible" content="ie=edge">
      
        <meta name="description" content="深度学习工程师生存指南">
      
      
        <link rel="canonical" href="https://dl.ypw.io/ubuntu-install-guide/">
      
      
        <meta name="author" content="杨培文">
      
      
        <meta name="lang:clipboard.copy" content="复制">
      
        <meta name="lang:clipboard.copied" content="已复制">
      
        <meta name="lang:search.language" content="ja">
      
        <meta name="lang:search.pipeline.stopwords" content="True">
      
        <meta name="lang:search.pipeline.trimmer" content="True">
      
        <meta name="lang:search.result.none" content="没有找到符合条件的结果">
      
        <meta name="lang:search.result.one" content="找到 1 个符合条件的结果">
      
        <meta name="lang:search.result.other" content="# 个符合条件的结果">
      
        <meta name="lang:search.tokenizer" content="[\uff0c\u3002]+">
      
      <link rel="shortcut icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.0.4, mkdocs-material-4.4.0">
    
    
      
        <title>Ubuntu 装机步骤 - 深度学习工程师生存指南</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/application.0284f74d.css">
      
        <link rel="stylesheet" href="../assets/stylesheets/application-palette.01803549.css">
      
      
        
        
        <meta name="theme-color" content="#7cb342">
      
    
    
      <script src="../assets/javascripts/modernizr.74668098.js"></script>
    
    
      
        <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700|Roboto+Mono&display=fallback">
        <style>body,input{font-family:"Roboto","Helvetica Neue",Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono","Courier New",Courier,monospace}</style>
      
    
    <link rel="stylesheet" href="../assets/fonts/material-icons.css">
    
    
    
      
        
<script>
  window.ga = window.ga || function() {
    (ga.q = ga.q || []).push(arguments)
  }
  ga.l = +new Date
  /* Setup integration and send page view */
  ga("create", "UA-111276663-2", "auto")
  ga("set", "anonymizeIp", true)
  ga("send", "pageview")
  /* Register handler to log search on blur */
  document.addEventListener("DOMContentLoaded", () => {
    if (document.forms.search) {
      var query = document.forms.search.query
      query.addEventListener("blur", function() {
        if (this.value) {
          var path = document.location.pathname;
          ga("send", "pageview", path + "?q=" + this.value)
        }
      })
    }
  })
</script>
<script async src="https://www.google-analytics.com/analytics.js"></script>
      
    
    
  </head>
  
    
    
    <body dir="ltr" data-md-color-primary="light-green" data-md-color-accent="light-green">
  
    <svg class="md-svg">
      <defs>
        
        
          <svg xmlns="http://www.w3.org/2000/svg" width="416" height="448" viewBox="0 0 416 448" id="__github"><path fill="currentColor" d="M160 304q0 10-3.125 20.5t-10.75 19T128 352t-18.125-8.5-10.75-19T96 304t3.125-20.5 10.75-19T128 256t18.125 8.5 10.75 19T160 304zm160 0q0 10-3.125 20.5t-10.75 19T288 352t-18.125-8.5-10.75-19T256 304t3.125-20.5 10.75-19T288 256t18.125 8.5 10.75 19T320 304zm40 0q0-30-17.25-51T296 232q-10.25 0-48.75 5.25Q229.5 240 208 240t-39.25-2.75Q130.75 232 120 232q-29.5 0-46.75 21T56 304q0 22 8 38.375t20.25 25.75 30.5 15 35 7.375 37.25 1.75h42q20.5 0 37.25-1.75t35-7.375 30.5-15 20.25-25.75T360 304zm56-44q0 51.75-15.25 82.75-9.5 19.25-26.375 33.25t-35.25 21.5-42.5 11.875-42.875 5.5T212 416q-19.5 0-35.5-.75t-36.875-3.125-38.125-7.5-34.25-12.875T37 371.5t-21.5-28.75Q0 312 0 260q0-59.25 34-99-6.75-20.5-6.75-42.5 0-29 12.75-54.5 27 0 47.5 9.875t47.25 30.875Q171.5 96 212 96q37 0 70 8 26.25-20.5 46.75-30.25T376 64q12.75 25.5 12.75 54.5 0 21.75-6.75 42 34 40 34 99.5z"/></svg>
        
      </defs>
    </svg>
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" data-md-component="overlay" for="__drawer"></label>
    
      <a href="#ubuntu" tabindex="1" class="md-skip">
        跳转至
      </a>
    
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid">
    <div class="md-flex">
      <div class="md-flex__cell md-flex__cell--shrink">
        <a href="https://dl.ypw.io" title="深度学习工程师生存指南" class="md-header-nav__button md-logo">
          
            <i class="md-icon"></i>
          
        </a>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="__drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <div class="md-flex__ellipsis md-header-nav__title" data-md-component="title">
          
            <span class="md-header-nav__topic">
              深度学习工程师生存指南
            </span>
            <span class="md-header-nav__topic">
              
                Ubuntu 装机步骤
              
            </span>
          
        </div>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        
          <label class="md-icon md-icon--search md-header-nav__button" for="__search"></label>
          
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" placeholder="搜索" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="query" data-md-state="active">
      <label class="md-icon md-search__icon" for="__search"></label>
      <button type="reset" class="md-icon md-search__icon" data-md-component="reset" tabindex="-1">
        &#xE5CD;
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="result">
          <div class="md-search-result__meta">
            键入以开始搜索
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
        
      </div>
      
        <div class="md-flex__cell md-flex__cell--shrink">
          <div class="md-header-nav__source">
            


  

<a href="https://github.com/ypwhs/dl-engineer-guidebook/" title="前往 Github 仓库" class="md-source" data-md-source="github">
  
    <div class="md-source__icon">
      <svg viewBox="0 0 24 24" width="24" height="24">
        <use xlink:href="#__github" width="24" height="24"></use>
      </svg>
    </div>
  
  <div class="md-source__repository">
    ypwhs/dl-engineer-guidebook
  </div>
</a>
          </div>
        </div>
      
    </div>
  </nav>
</header>
    
    <div class="md-container">
      
        
      
      
        

  

<nav class="md-tabs md-tabs--active" data-md-component="tabs">
  <div class="md-tabs__inner md-grid">
    <ul class="md-tabs__list">
      
        
  <li class="md-tabs__item">
    
      <a href=".." title="首页" class="md-tabs__link">
        首页
      </a>
    
  </li>

      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
  
  
    <li class="md-tabs__item">
      
        <a href="../how-to-build-deep-learning-workstation/" title="硬件" class="md-tabs__link">
          硬件
        </a>
      
    </li>
  

      
        
  
  
    <li class="md-tabs__item">
      
        <a href="../mac-compare/" title="Mac" class="md-tabs__link">
          Mac
        </a>
      
    </li>
  

      
        
  
  
    <li class="md-tabs__item">
      
        <a href="./" title="Linux" class="md-tabs__link md-tabs__link--active">
          Linux
        </a>
      
    </li>
  

      
        
  
  
    <li class="md-tabs__item">
      
        <a href="../cv-resources/" title="CV" class="md-tabs__link">
          CV
        </a>
      
    </li>
  

      
        
  
  
    <li class="md-tabs__item">
      
        <a href="../how-to-use-tensorboard/" title="使用技巧" class="md-tabs__link">
          使用技巧
        </a>
      
    </li>
  

      
    </ul>
  </div>
</nav>
      
      <main class="md-main">
        <div class="md-main__inner md-grid" data-md-component="container">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" data-md-level="0">
  <label class="md-nav__title md-nav__title--site" for="__drawer">
    <a href="https://dl.ypw.io" title="深度学习工程师生存指南" class="md-nav__button md-logo">
      
        <i class="md-icon"></i>
      
    </a>
    深度学习工程师生存指南
  </label>
  
    <div class="md-nav__source">
      


  

<a href="https://github.com/ypwhs/dl-engineer-guidebook/" title="前往 Github 仓库" class="md-source" data-md-source="github">
  
    <div class="md-source__icon">
      <svg viewBox="0 0 24 24" width="24" height="24">
        <use xlink:href="#__github" width="24" height="24"></use>
      </svg>
    </div>
  
  <div class="md-source__repository">
    ypwhs/dl-engineer-guidebook
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href=".." title="首页" class="md-nav__link">
      首页
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../how-to-build-deep-learning-workstation/" title="如何配置一台深度学习工作站?" class="md-nav__link">
      如何配置一台深度学习工作站?
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../windows-linux-or-macos/" title="Windows、Ubuntu 还是 macOS？" class="md-nav__link">
      Windows、Ubuntu 还是 macOS？
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../mac-compare/" title="Mac 对比" class="md-nav__link">
      Mac 对比
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../macos-software/" title="macOS 软件" class="md-nav__link">
      macOS 软件
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../macos-environment/" title="macOS 环境" class="md-nav__link">
      macOS 环境
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../python-environment/" title="Python 环境" class="md-nav__link">
      Python 环境
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    
    <input class="md-toggle md-nav__toggle" data-md-toggle="toc" type="checkbox" id="__toc">
    
      
    
    
      <label class="md-nav__link md-nav__link--active" for="__toc">
        Ubuntu 装机步骤
      </label>
    
    <a href="./" title="Ubuntu 装机步骤" class="md-nav__link md-nav__link--active">
      Ubuntu 装机步骤
    </a>
    
      
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">目录</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#ubuntu_1" title="安装 Ubuntu" class="md-nav__link">
    安装 Ubuntu
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ssh" title="配置 ssh" class="md-nav__link">
    配置 ssh
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#openssh-server" title="安装 openssh-server" class="md-nav__link">
    安装 openssh-server
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ssh-keygen-ssh-key" title="使用 ssh-keygen 生成一个 ssh key" class="md-nav__link">
    使用 ssh-keygen 生成一个 ssh key
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ubuntu-ssh-key" title="在 Ubuntu 服务器上添加刚才生成的 ssh key" class="md-nav__link">
    在 Ubuntu 服务器上添加刚才生成的 ssh key
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_1" title="禁止密码登录" class="md-nav__link">
    禁止密码登录
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#sudo-apt" title="配置 sudo 免密码 和 apt 源" class="md-nav__link">
    配置 sudo 免密码 和 apt 源
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#sudo" title="配置 sudo 免密码" class="md-nav__link">
    配置 sudo 免密码
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#apt" title="配置 apt 源" class="md-nav__link">
    配置 apt 源
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#oh-my-zsh" title="安装 oh my zsh 以及常用命令" class="md-nav__link">
    安装 oh my zsh 以及常用命令
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#oh-my-zsh_1" title="安装 oh my zsh" class="md-nav__link">
    安装 oh my zsh
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_2" title="常用命令" class="md-nav__link">
    常用命令
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#nvidia-cuda-cudnnapt" title="安装 NVIDIA 驱动、CUDA 和 cuDNN（apt）" class="md-nav__link">
    安装 NVIDIA 驱动、CUDA 和 cuDNN（apt）
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#apt_1" title="使用 apt 安装驱动" class="md-nav__link">
    使用 apt 安装驱动
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_3" title="测试显卡" class="md-nav__link">
    测试显卡
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cuda-cudnn" title="安装 CUDA 和 cuDNN" class="md-nav__link">
    安装 CUDA 和 cuDNN
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_4" title="配置环境变量" class="md-nav__link">
    配置环境变量
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#tensorrt" title="安装 TensorRT（可选）" class="md-nav__link">
    安装 TensorRT（可选）
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#nvidia-cuda-cudnnrun" title="安装 NVIDIA 驱动、CUDA 和 cuDNN（run）" class="md-nav__link">
    安装 NVIDIA 驱动、CUDA 和 cuDNN（run）
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_5" title="下载驱动" class="md-nav__link">
    下载驱动
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#nouveau" title="屏蔽 Nouveau" class="md-nav__link">
    屏蔽 Nouveau
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_6" title="安装必要的编译工具" class="md-nav__link">
    安装必要的编译工具
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_7" title="安装显卡驱动" class="md-nav__link">
    安装显卡驱动
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_8" title="测试显卡" class="md-nav__link">
    测试显卡
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cuda-cudnn_1" title="安装 CUDA 和 cuDNN" class="md-nav__link">
    安装 CUDA 和 cuDNN
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cuda-100" title="安装 CUDA 10.0" class="md-nav__link">
    安装 CUDA 10.0
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cudnn" title="安装 cuDNN" class="md-nav__link">
    安装 cuDNN
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#anaconda-python" title="安装 Anaconda 和 Python 库" class="md-nav__link">
    安装 Anaconda 和 Python 库
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#anaconda" title="安装 Anaconda" class="md-nav__link">
    安装 Anaconda
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pip" title="配置 pip 源" class="md-nav__link">
    配置 pip 源
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#python" title="Python 库" class="md-nav__link">
    Python 库
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pytorch" title="测试 PyTorch" class="md-nav__link">
    测试 PyTorch
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#tensorflow" title="测试 TensorFlow" class="md-nav__link">
    测试 TensorFlow
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
    
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../ubuntu-environment/" title="Ubuntu 环境" class="md-nav__link">
      Ubuntu 环境
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../linux-command/" title="常用 Linux 命令" class="md-nav__link">
      常用 Linux 命令
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../cv-resources/" title="CV 学习资源" class="md-nav__link">
      CV 学习资源
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../cv-dataset/" title="常用 CV 数据集" class="md-nav__link">
      常用 CV 数据集
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../best-models-on-imagenet/" title="在 ImageNet 上表现出色的经典模型" class="md-nav__link">
      在 ImageNet 上表现出色的经典模型
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../how-to-use-tensorboard/" title="如何使用 TensorBoard" class="md-nav__link">
      如何使用 TensorBoard
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-15" type="checkbox" id="nav-15">
    
    <label class="md-nav__link" for="nav-15">
      硬件
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-15">
        硬件
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../how-to-build-deep-learning-workstation/" title="如何配置一台深度学习工作站?" class="md-nav__link">
      如何配置一台深度学习工作站?
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../windows-linux-or-macos/" title="Windows、Ubuntu 还是 macOS？" class="md-nav__link">
      Windows、Ubuntu 还是 macOS？
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-16" type="checkbox" id="nav-16">
    
    <label class="md-nav__link" for="nav-16">
      Mac
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-16">
        Mac
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../mac-compare/" title="Mac 对比" class="md-nav__link">
      Mac 对比
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../macos-software/" title="macOS 软件" class="md-nav__link">
      macOS 软件
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../macos-environment/" title="macOS 环境" class="md-nav__link">
      macOS 环境
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../python-environment/" title="Python 环境" class="md-nav__link">
      Python 环境
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      

  


  <li class="md-nav__item md-nav__item--active md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-17" type="checkbox" id="nav-17" checked>
    
    <label class="md-nav__link" for="nav-17">
      Linux
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-17">
        Linux
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          

  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-toggle md-nav__toggle" data-md-toggle="toc" type="checkbox" id="__toc">
    
      
    
    
      <label class="md-nav__link md-nav__link--active" for="__toc">
        Ubuntu 装机步骤
      </label>
    
    <a href="./" title="Ubuntu 装机步骤" class="md-nav__link md-nav__link--active">
      Ubuntu 装机步骤
    </a>
    
      
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">目录</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#ubuntu_1" title="安装 Ubuntu" class="md-nav__link">
    安装 Ubuntu
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ssh" title="配置 ssh" class="md-nav__link">
    配置 ssh
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#openssh-server" title="安装 openssh-server" class="md-nav__link">
    安装 openssh-server
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ssh-keygen-ssh-key" title="使用 ssh-keygen 生成一个 ssh key" class="md-nav__link">
    使用 ssh-keygen 生成一个 ssh key
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ubuntu-ssh-key" title="在 Ubuntu 服务器上添加刚才生成的 ssh key" class="md-nav__link">
    在 Ubuntu 服务器上添加刚才生成的 ssh key
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_1" title="禁止密码登录" class="md-nav__link">
    禁止密码登录
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#sudo-apt" title="配置 sudo 免密码 和 apt 源" class="md-nav__link">
    配置 sudo 免密码 和 apt 源
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#sudo" title="配置 sudo 免密码" class="md-nav__link">
    配置 sudo 免密码
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#apt" title="配置 apt 源" class="md-nav__link">
    配置 apt 源
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#oh-my-zsh" title="安装 oh my zsh 以及常用命令" class="md-nav__link">
    安装 oh my zsh 以及常用命令
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#oh-my-zsh_1" title="安装 oh my zsh" class="md-nav__link">
    安装 oh my zsh
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_2" title="常用命令" class="md-nav__link">
    常用命令
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#nvidia-cuda-cudnnapt" title="安装 NVIDIA 驱动、CUDA 和 cuDNN（apt）" class="md-nav__link">
    安装 NVIDIA 驱动、CUDA 和 cuDNN（apt）
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#apt_1" title="使用 apt 安装驱动" class="md-nav__link">
    使用 apt 安装驱动
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_3" title="测试显卡" class="md-nav__link">
    测试显卡
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cuda-cudnn" title="安装 CUDA 和 cuDNN" class="md-nav__link">
    安装 CUDA 和 cuDNN
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_4" title="配置环境变量" class="md-nav__link">
    配置环境变量
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#tensorrt" title="安装 TensorRT（可选）" class="md-nav__link">
    安装 TensorRT（可选）
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#nvidia-cuda-cudnnrun" title="安装 NVIDIA 驱动、CUDA 和 cuDNN（run）" class="md-nav__link">
    安装 NVIDIA 驱动、CUDA 和 cuDNN（run）
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_5" title="下载驱动" class="md-nav__link">
    下载驱动
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#nouveau" title="屏蔽 Nouveau" class="md-nav__link">
    屏蔽 Nouveau
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_6" title="安装必要的编译工具" class="md-nav__link">
    安装必要的编译工具
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_7" title="安装显卡驱动" class="md-nav__link">
    安装显卡驱动
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_8" title="测试显卡" class="md-nav__link">
    测试显卡
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cuda-cudnn_1" title="安装 CUDA 和 cuDNN" class="md-nav__link">
    安装 CUDA 和 cuDNN
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cuda-100" title="安装 CUDA 10.0" class="md-nav__link">
    安装 CUDA 10.0
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cudnn" title="安装 cuDNN" class="md-nav__link">
    安装 cuDNN
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#anaconda-python" title="安装 Anaconda 和 Python 库" class="md-nav__link">
    安装 Anaconda 和 Python 库
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#anaconda" title="安装 Anaconda" class="md-nav__link">
    安装 Anaconda
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pip" title="配置 pip 源" class="md-nav__link">
    配置 pip 源
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#python" title="Python 库" class="md-nav__link">
    Python 库
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pytorch" title="测试 PyTorch" class="md-nav__link">
    测试 PyTorch
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#tensorflow" title="测试 TensorFlow" class="md-nav__link">
    测试 TensorFlow
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
    
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../ubuntu-environment/" title="Ubuntu 环境" class="md-nav__link">
      Ubuntu 环境
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../python-environment/" title="Python 环境" class="md-nav__link">
      Python 环境
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../linux-command/" title="常用 Linux 命令" class="md-nav__link">
      常用 Linux 命令
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-18" type="checkbox" id="nav-18">
    
    <label class="md-nav__link" for="nav-18">
      CV
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-18">
        CV
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../cv-resources/" title="CV 学习资源" class="md-nav__link">
      CV 学习资源
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../cv-dataset/" title="常用 CV 数据集" class="md-nav__link">
      常用 CV 数据集
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../best-models-on-imagenet/" title="在 ImageNet 上表现出色的经典模型" class="md-nav__link">
      在 ImageNet 上表现出色的经典模型
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-19" type="checkbox" id="nav-19">
    
    <label class="md-nav__link" for="nav-19">
      使用技巧
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-19">
        使用技巧
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../how-to-use-tensorboard/" title="如何使用 TensorBoard" class="md-nav__link">
      如何使用 TensorBoard
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../remote-debugging-with-pycharm/" title="如何使用 PyCharm 远程调试" class="md-nav__link">
      如何使用 PyCharm 远程调试
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../docker-is-good/" title="Docker 是个好东西" class="md-nav__link">
      Docker 是个好东西
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">目录</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#ubuntu_1" title="安装 Ubuntu" class="md-nav__link">
    安装 Ubuntu
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ssh" title="配置 ssh" class="md-nav__link">
    配置 ssh
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#openssh-server" title="安装 openssh-server" class="md-nav__link">
    安装 openssh-server
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ssh-keygen-ssh-key" title="使用 ssh-keygen 生成一个 ssh key" class="md-nav__link">
    使用 ssh-keygen 生成一个 ssh key
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ubuntu-ssh-key" title="在 Ubuntu 服务器上添加刚才生成的 ssh key" class="md-nav__link">
    在 Ubuntu 服务器上添加刚才生成的 ssh key
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_1" title="禁止密码登录" class="md-nav__link">
    禁止密码登录
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#sudo-apt" title="配置 sudo 免密码 和 apt 源" class="md-nav__link">
    配置 sudo 免密码 和 apt 源
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#sudo" title="配置 sudo 免密码" class="md-nav__link">
    配置 sudo 免密码
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#apt" title="配置 apt 源" class="md-nav__link">
    配置 apt 源
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#oh-my-zsh" title="安装 oh my zsh 以及常用命令" class="md-nav__link">
    安装 oh my zsh 以及常用命令
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#oh-my-zsh_1" title="安装 oh my zsh" class="md-nav__link">
    安装 oh my zsh
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_2" title="常用命令" class="md-nav__link">
    常用命令
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#nvidia-cuda-cudnnapt" title="安装 NVIDIA 驱动、CUDA 和 cuDNN（apt）" class="md-nav__link">
    安装 NVIDIA 驱动、CUDA 和 cuDNN（apt）
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#apt_1" title="使用 apt 安装驱动" class="md-nav__link">
    使用 apt 安装驱动
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_3" title="测试显卡" class="md-nav__link">
    测试显卡
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cuda-cudnn" title="安装 CUDA 和 cuDNN" class="md-nav__link">
    安装 CUDA 和 cuDNN
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_4" title="配置环境变量" class="md-nav__link">
    配置环境变量
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#tensorrt" title="安装 TensorRT（可选）" class="md-nav__link">
    安装 TensorRT（可选）
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#nvidia-cuda-cudnnrun" title="安装 NVIDIA 驱动、CUDA 和 cuDNN（run）" class="md-nav__link">
    安装 NVIDIA 驱动、CUDA 和 cuDNN（run）
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_5" title="下载驱动" class="md-nav__link">
    下载驱动
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#nouveau" title="屏蔽 Nouveau" class="md-nav__link">
    屏蔽 Nouveau
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_6" title="安装必要的编译工具" class="md-nav__link">
    安装必要的编译工具
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_7" title="安装显卡驱动" class="md-nav__link">
    安装显卡驱动
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_8" title="测试显卡" class="md-nav__link">
    测试显卡
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cuda-cudnn_1" title="安装 CUDA 和 cuDNN" class="md-nav__link">
    安装 CUDA 和 cuDNN
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cuda-100" title="安装 CUDA 10.0" class="md-nav__link">
    安装 CUDA 10.0
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cudnn" title="安装 cuDNN" class="md-nav__link">
    安装 cuDNN
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#anaconda-python" title="安装 Anaconda 和 Python 库" class="md-nav__link">
    安装 Anaconda 和 Python 库
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#anaconda" title="安装 Anaconda" class="md-nav__link">
    安装 Anaconda
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pip" title="配置 pip 源" class="md-nav__link">
    配置 pip 源
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#python" title="Python 库" class="md-nav__link">
    Python 库
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pytorch" title="测试 PyTorch" class="md-nav__link">
    测试 PyTorch
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#tensorflow" title="测试 TensorFlow" class="md-nav__link">
    测试 TensorFlow
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                  <a href="https://github.com/ypwhs/dl-engineer-guidebook/blob/mkdocs/docs/ubuntu-install-guide.md" title="编辑此页" class="md-icon md-content__icon">&#xE3C9;</a>
                
                
                <h1 id="ubuntu">Ubuntu 装机步骤</h1>
<ul>
<li>安装 Ubuntu</li>
<li>配置 ssh</li>
<li>配置 sudo 免密码 和 apt 源（推荐）</li>
<li>安装 oh my zsh 以及常用命令（推荐）</li>
<li>安装 NVIDIA 驱动、CUDA 和 cuDNN（分为 apt 和 run 两种安装方式）</li>
<li>安装 Anaconda 和 Python 库</li>
</ul>
<h2 id="ubuntu_1">安装 Ubuntu</h2>
<p>以下是 Ubuntu 官方网站上的教程：</p>
<ul>
<li><a href="https://tutorials.ubuntu.com/tutorial/tutorial-create-a-usb-stick-on-windows">在 Windows 上制作 Ubuntu 系统盘</a></li>
<li><a href="https://tutorials.ubuntu.com/tutorial/tutorial-burn-a-dvd-on-macos">在 macOS 上制作 Ubuntu 系统盘</a></li>
<li><a href="https://tutorials.ubuntu.com/tutorial/tutorial-install-ubuntu-desktop">安装 Ubuntu</a></li>
</ul>
<p>如果你的主板支持 EFI，直接解压 ISO 到 U盘里即可制作好系统盘。</p>
<p>目前我安装的版本是 <a href="http://releases.ubuntu.com/18.04/">Ubuntu 18.04</a></p>
<p>如果遇到网络问题，可以使用清华大学的镜像：<a href="https://mirror.tuna.tsinghua.edu.cn/ubuntu-releases/18.04.2/ubuntu-18.04.2-desktop-amd64.iso">https://mirror.tuna.tsinghua.edu.cn/ubuntu-releases/18.04.2/ubuntu-18.04.2-desktop-amd64.iso</a></p>
<h2 id="ssh">配置 ssh</h2>
<h3 id="openssh-server">安装 openssh-server</h3>
<p>装好 Ubuntu 以后，为了能够方便地在其他终端上远程连接，安装各种软件，我一般会先装 openssh-server。</p>
<div class="codehilite"><pre><span></span>sudo apt update
sudo apt install openssh-server
</pre></div>


<p>装好了以后，就可以在终端里通过下面的命令连接服务器。</p>
<div class="codehilite"><pre><span></span>ssh <span class="m">192</span>.168.8.65
</pre></div>


<p>使用到的命令：<a href="../linux-command/#apt">apt</a>、<a href="../linux-command/#ssh">ssh</a></p>
<h3 id="ssh-keygen-ssh-key">使用 ssh-keygen 生成一个 ssh key</h3>
<p>目前使用密码上不如使用 key 安全的，因为 key 的长度通常是 2048 或 4096 位，远超普通的密码。这里建议按照 GitHub 官方网站上的教程<a href="https://help.github.com/cn/articles/generating-a-new-ssh-key-and-adding-it-to-the-ssh-agent">生成新 SSH 密钥并添加到 ssh-agent</a>，这样不仅可以用于登录 Linux 机器，也可以用于 git。</p>
<p>使用 <code class="codehilite">ssh-keygen</code> 生成了密钥以后，你会得到两个文件：</p>
<ul>
<li><code class="codehilite">~/.ssh/id_rsa</code></li>
<li><code class="codehilite">~/.ssh/id_rsa.pub</code></li>
</ul>
<p>其中 <code class="codehilite">id_rsa</code> 是私钥，<code class="codehilite">id_rsa.pub</code> 是公钥。不要把私钥发给任何人。</p>
<p>​公钥通常上这样的文本：</p>
<blockquote>
<p>ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQDcfQD4nnaQrgC003C0ReAYqrm6XKEchuM6DwkNtHzRs2YhLolH6fEohWAp0mlW9yzQl258lA+FdoH51ONmvGUx/2Y953A6ujHrt7dOIpOkYW5HT6Rmvlwk+3uRmVNQqZTJeRWdblcSHmYY1fi1miawONZiVoLW14xhyH5bOwgwY/GB2yTaffDby451RLT5kQ7LHqiDJtWiRQekR5tKDKZ7mBhKZIKYLOoqAayCHw2scJYsgtw2tPt0/y7BlxO+RuDwuD2WOnthe1ewbwAbbTN17HiLvBd/MIWtVDoGGq6jdNDjNDNbTs8H2VohTc2mNtOOlycN6yzf3ZKZTN6/hNtl ypw@yangpeiendeiMac</p>
</blockquote>
<h3 id="ubuntu-ssh-key">在 Ubuntu 服务器上添加刚才生成的 ssh key</h3>
<p>首先使用密码登录刚才的机器：</p>
<div class="codehilite"><pre><span></span>ssh <span class="m">192</span>.168.8.65
</pre></div>


<p>然后创建 <code class="codehilite">~/.ssh</code> 目录，并且创建 <code class="codehilite">~/.ssh/authorized_keys</code> 文件，配置好相应的权限：</p>
<div class="codehilite"><pre><span></span>mkdir -p ~/.ssh
touch ~/.ssh/authorized_keys
chmod <span class="m">700</span> ~/.ssh
chmod <span class="m">600</span> ~/.ssh/authorized_keys
nano ~/.ssh/authorized_keys

<span class="c1"># 添加你的公钥，如 ssh-rsa AAAA...</span>
</pre></div>


<p>把刚才生成的公钥 <code class="codehilite">id_rsa.pub</code> 添加到 <code class="codehilite">~/.ssh/authorized_keys</code> 里，如果文件已经有内容，就添加在最后一行。这样以后<strong>每次使用 ssh 登录机器都不需要再输入密码了</strong>。</p>
<p>使用到的命令：<a href="../linux-command/#mkdir">mkdir</a>、<a href="../linux-command/#touch">touch</a>、<a href="../linux-command/#chmod">chmod</a>、<a href="../linux-command/#nano">nano</a></p>
<h3 id="_1">禁止密码登录</h3>
<p>由于密码登录存在不安全因素，比如暴露在公网的 IP 会被扫描，而 key 是相对安全的，所以我们可以禁止不安全的密码登录：</p>
<div class="codehilite"><pre><span></span>sudo nano /etc/ssh/sshd_config

PasswordAuthentication no <span class="c1"># 添加在最后一行</span>
</pre></div>


<h2 id="sudo-apt">配置 sudo 免密码 和 apt 源</h2>
<h3 id="sudo">配置 sudo 免密码</h3>
<p>由于安装驱动等操作需要 sudo 权限，为了避免频繁输入密码，可以配置 sudo 免密码：</p>
<div class="codehilite"><pre><span></span>sudo nano /etc/sudoers

ypw <span class="nv">ALL</span><span class="o">=(</span>ALL<span class="o">)</span> NOPASSWD:ALL <span class="c1"># 添加在最后一行</span>
</pre></div>


<h3 id="apt">配置 apt 源</h3>
<p>在使用 apt 的时候有可能因为网络原因导致安装过慢或失败，这时候可以配置一些 apt 源：</p>
<ul>
<li><a href="https://mirror.tuna.tsinghua.edu.cn/help/ubuntu/">https://mirror.tuna.tsinghua.edu.cn/help/ubuntu/</a></li>
<li><a href="https://opsx.alibaba.com/mirror">https://opsx.alibaba.com/mirror</a></li>
</ul>
<p>下面以清华大学开源软件镜像站为例：</p>
<div class="codehilite"><pre><span></span>sudo mv /etc/apt/sources.list /etc/apt/sources_backup.list
sudo nano /etc/apt/sources.list

<span class="c1"># 添加下面的内容，保存</span>
deb https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ bionic main restricted universe multiverse
<span class="c1"># deb-src https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ bionic main restricted universe multiverse</span>
deb https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ bionic-updates main restricted universe multiverse
<span class="c1"># deb-src https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ bionic-updates main restricted universe multiverse</span>
deb https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ bionic-backports main restricted universe multiverse
<span class="c1"># deb-src https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ bionic-backports main restricted universe multiverse</span>
deb https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ bionic-security main restricted universe multiverse
<span class="c1"># deb-src https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ bionic-security main restricted universe multiverse</span>
</pre></div>


<p>添加好以后，使用下面的命令更新 apt 以后，安装其他软件包的速度就会变快：</p>
<div class="codehilite"><pre><span></span>sudo apt update
</pre></div>


<p>恢复默认源：</p>
<div class="codehilite"><pre><span></span>sudo mv /etc/apt/sources_backup.list /etc/apt/sources.list
</pre></div>


<h2 id="oh-my-zsh">安装 oh my zsh 以及常用命令</h2>
<h3 id="oh-my-zsh_1">安装 oh my zsh</h3>
<p>相比默认的 bash，zsh 有以下几个优点：</p>
<ul>
<li>当你使用 tab 提示的时候，如果有多个匹配项，你可以用 tab 进行切换</li>
<li>当你想使用一个之前输入过的命令的时候，只需要输入首字母，然后按上方向键切换</li>
</ul>
<p>安装 oh my zsh 的步骤如下：</p>
<ul>
<li>安装 <a href="https://github.com/robbyrussell/oh-my-zsh/wiki/Installing-ZSH">zsh</a></li>
<li>安装 <a href="https://ohmyz.sh/">oh my zsh</a></li>
</ul>
<p>完整命令如下：</p>
<div class="codehilite"><pre><span></span>sudo apt install -y git curl zsh
sh -c <span class="s2">&quot;</span><span class="k">$(</span>curl -fsSL https://raw.githubusercontent.com/robbyrussell/oh-my-zsh/master/tools/install.sh<span class="k">)</span><span class="s2">&quot;</span>
</pre></div>


<h3 id="_2">常用命令</h3>
<p>这些是我眼中的<a href="../ubuntu-environment/#bi-bei-ming-ling">必备命令</a>，你可以按照自己的需要安装：</p>
<div class="codehilite"><pre><span></span>sudo apt install -y git curl htop nload tmux screen aria2 graphviz aptitude tree
</pre></div>


<h2 id="nvidia-cuda-cudnnapt">安装 NVIDIA 驱动、CUDA 和 cuDNN（apt）</h2>
<p>安装驱动有两种方法，一种是使用apt安装，一种是直接下载驱动安装。</p>
<h3 id="apt_1">使用 apt 安装驱动</h3>
<p>安装过程可以参考 TensorFlow 的教程：<a href="https://www.tensorflow.org/install/gpu">https://www.tensorflow.org/install/gpu</a></p>
<p>下面是我安装的命令：</p>
<div class="codehilite"><pre><span></span><span class="c1"># Add NVIDIA package repositories</span>
wget https://developer.download.nvidia.com/compute/cuda/repos/ubuntu1804/x86_64/cuda-repo-ubuntu1804_10.0.130-1_amd64.deb
sudo dpkg -i cuda-repo-ubuntu1804_10.0.130-1_amd64.deb
sudo apt-key adv --fetch-keys https://developer.download.nvidia.com/compute/cuda/repos/ubuntu1804/x86_64/7fa2af80.pub
sudo apt update
wget http://developer.download.nvidia.com/compute/machine-learning/repos/ubuntu1804/x86_64/nvidia-machine-learning-repo-ubuntu1804_1.0.0-1_amd64.deb
sudo apt install ./nvidia-machine-learning-repo-ubuntu1804_1.0.0-1_amd64.deb
sudo apt update

<span class="c1"># Install NVIDIA driver</span>
sudo aptitude install nvidia-driver-410
<span class="c1"># Reboot. Check that GPUs are visible using the command: nvidia-smi</span>
</pre></div>


<p>如果因为网络原因导致下载很慢，可以使用下面的命令让 apt 使用代理：</p>
<div class="codehilite"><pre><span></span>sudo nano /etc/apt/apt.conf

<span class="c1"># 下面的内容按照实际情况进行修改</span>
Acquire::http::Proxy <span class="s2">&quot;http://192.168.8.246:1087&quot;</span><span class="p">;</span>
</pre></div>


<p>为了避免重启以后鼠标键盘没反应，需要运行下面的命令：</p>
<div class="codehilite"><pre><span></span>sudo apt install --reinstall xserver-xorg-input-all
</pre></div>


<h3 id="_3">测试显卡</h3>
<p>装好系统以后需要重新启动机器，重启以后运行下面的命令即可测试显卡：</p>
<div class="codehilite"><pre><span></span>nvidia-smi
</pre></div>


<p>如果能看到类似的内容就说明显卡驱动装好了：</p>
<div class="codehilite"><pre><span></span>Sun Jul 21 12:05:35 2019
+-----------------------------------------------------------------------------+
| NVIDIA-SMI 410.104      Driver Version: 410.104      CUDA Version: 10.0     |
|-------------------------------+----------------------+----------------------+
| GPU  Name        Persistence-M| Bus-Id        Disp.A | Volatile Uncorr. ECC |
| Fan  Temp  Perf  Pwr:Usage/Cap|         Memory-Usage | GPU-Util  Compute M. |
|===============================+======================+======================|
|   0  GeForce GTX 108...  On   | 00000000:0B:00.0 Off |                  N/A |
|  0%   40C    P8    11W / 275W |      0MiB / 11178MiB |      0%      Default |
+-------------------------------+----------------------+----------------------+

+-----------------------------------------------------------------------------+
| Processes:                                                       GPU Memory |
|  GPU       PID   Type   Process name                             Usage      |
|=============================================================================|
|  No running processes found                                                 |
+-----------------------------------------------------------------------------+
</pre></div>


<h3 id="cuda-cudnn">安装 CUDA 和 cuDNN</h3>
<p>注意：</p>
<ul>
<li>此步骤需下载较大的安装包</li>
<li>PyTorch 用户可以不安装 CUDA 和 cuDNN</li>
</ul>
<div class="codehilite"><pre><span></span>sudo apt install --no-install-recommends <span class="se">\</span>
    cuda-10-0 <span class="se">\</span>
    <span class="nv">libcudnn7</span><span class="o">=</span><span class="m">7</span>.6.0.64-1+cuda10.0  <span class="se">\</span>
    libcudnn7-dev<span class="o">=</span><span class="m">7</span>.6.0.64-1+cuda10.0
</pre></div>


<h3 id="_4">配置环境变量</h3>
<p>安装好以后还需要<a href="../linux-command/#export">配置环境变量</a>，这里我以 <code class="codehilite">~/.zshrc</code> 为例：</p>
<div class="codehilite"><pre><span></span>nano ~/.zshrc

<span class="c1"># 添加下面的内容</span>
<span class="nb">export</span> <span class="nv">PATH</span><span class="o">=</span>/usr/local/cuda/bin:<span class="nv">$PATH</span>
<span class="nb">export</span> <span class="nv">LD_LIBRARY_PATH</span><span class="o">=</span>/usr/local/cuda/lib64:<span class="nv">$PATH</span>
</pre></div>


<h3 id="tensorrt">安装 TensorRT（可选）</h3>
<div class="codehilite"><pre><span></span>sudo apt update
sudo apt install -y --no-install-recommends <span class="nv">libnvinfer5</span><span class="o">=</span><span class="m">5</span>.1.5-1+cuda10.0
sudo apt install -y --no-install-recommends libnvinfer-dev<span class="o">=</span><span class="m">5</span>.1.5-1+cuda10.0
</pre></div>


<h2 id="nvidia-cuda-cudnnrun">安装 NVIDIA 驱动、CUDA 和 cuDNN（run）</h2>
<h3 id="_5">下载驱动</h3>
<p>首先去官网下载驱动：<a href="https://www.nvidia.com/Download/index.aspx?lang=cn">https://www.nvidia.com/Download/index.aspx?lang=cn</a></p>
<p>有下面几种方法可以下载：</p>
<ul>
<li>在 Ubuntu 机器上直接使用浏览器下载</li>
<li>在自己机器上下载，然后通过 <a href="../linux-command/#scp">scp</a> 传到 Ubuntu 机器上</li>
<li>在自己机器上找到下载地址，然后在 Ubuntu 机器上使用 wget 命令下载</li>
</ul>
<p>以上方法可以根据实际情况选择，这里我选择第三种方法：</p>
<div class="codehilite"><pre><span></span>wget https://cn.download.nvidia.cn/XFree86/Linux-x86_64/430.34/NVIDIA-Linux-x86_64-430.34.run
</pre></div>


<h3 id="nouveau">屏蔽 Nouveau</h3>
<p>如果你没有屏蔽，就会出现以下提示：</p>
<blockquote>
<p>ERROR: The Nouveau kernel driver is currently in use by your system. This driver is incompatible with the NVIDIA driver, and must be disabled before proceeding. Please consult the NVIDIA driver README and your Linux distribution's documentation for details on how to correctly disable the Nouveau kernel driver.</p>
</blockquote>
<p>命令：</p>
<div class="codehilite"><pre><span></span>sudo nano /etc/modprobe.d/blacklist-nouveau.conf

<span class="c1"># 添加以下内容</span>

blacklist nouveau
options nouveau <span class="nv">modeset</span><span class="o">=</span><span class="m">0</span>

<span class="c1"># 保存</span>

sudo update-initramfs -u
sudo reboot
</pre></div>


<h3 id="_6">安装必要的编译工具</h3>
<p>如果没有安装 gcc 等编译工具，就会出现以下提示：</p>
<blockquote>
<p>ERROR: Unable to find the development tool <code class="codehilite">cc</code> in your path; please make sure that you have the package 'gcc' installed. If gcc is installed on your system, then please check that <code class="codehilite">cc</code> is in your PATH.</p>
</blockquote>
<p>命令：</p>
<div class="codehilite"><pre><span></span>sudo apt install -y build-essential gcc g++ make binutils linux-headers-<span class="sb">`</span>uname -r<span class="sb">`</span>
</pre></div>


<h3 id="_7">安装显卡驱动</h3>
<div class="codehilite"><pre><span></span>sudo bash NVIDIA-Linux-x86_64-430.34.run
</pre></div>


<p>安装步骤很简单，一直下一步就好了。</p>
<h3 id="_8">测试显卡</h3>
<div class="codehilite"><pre><span></span>nvidia-smi
</pre></div>


<p>如果能看到类似的内容就说明显卡驱动装好了：</p>
<div class="codehilite"><pre><span></span>Sun Jul 21 10:37:16 2019
+-----------------------------------------------------------------------------+
| NVIDIA-SMI 430.34       Driver Version: 430.34       CUDA Version: 10.1     |
|-------------------------------+----------------------+----------------------+
| GPU  Name        Persistence-M| Bus-Id        Disp.A | Volatile Uncorr. ECC |
| Fan  Temp  Perf  Pwr:Usage/Cap|         Memory-Usage | GPU-Util  Compute M. |
|===============================+======================+======================|
|   0  GeForce GTX 108...  Off  | 00000000:0B:00.0 Off |                  N/A |
|  0%   43C    P0    62W / 275W |      0MiB / 11178MiB |      0%      Default |
+-------------------------------+----------------------+----------------------+

+-----------------------------------------------------------------------------+
| Processes:                                                       GPU Memory |
|  GPU       PID   Type   Process name                             Usage      |
|=============================================================================|
|  No running processes found                                                 |
+-----------------------------------------------------------------------------+
</pre></div>


<h3 id="cuda-cudnn_1">安装 CUDA 和 cuDNN</h3>
<p>由于不同的深度学习框架的 CUDA 和 cuDNN 版本依赖是不同的，所以请按照你所需要的深度学习框架官网上的说明为准。关于 CUDA 版本、cuDNN版本以及深度学习环境的介绍，请看 <a href="../ubuntu-environment/">Ubuntu 环境</a>。</p>
<p>提示：PyTorch 用户可以不安装 CUDA 和 cuDNN。</p>
<h3 id="cuda-100">安装 CUDA 10.0</h3>
<p>由于此安装包比较大，建议使用 aria2c 下载：</p>
<div class="codehilite"><pre><span></span>aria2c -x <span class="m">16</span> https://developer.nvidia.com/compute/cuda/10.0/Prod/local_installers/cuda_10.0.130_410.48_linux
</pre></div>


<p>下载好了以后，直接运行安装即可：</p>
<div class="codehilite"><pre><span></span>sudo bash cuda_10.0.130_410.48_linux.run

<span class="c1"># 按 q 退出 EULA</span>

NVIDIA CUDA Toolkit
Do you accept the previously <span class="nb">read</span> EULA?
accept/decline/quit: accept

Install NVIDIA Accelerated Graphics Driver <span class="k">for</span> Linux-x86_64 <span class="m">410</span>.48?
<span class="o">(</span>y<span class="o">)</span>es/<span class="o">(</span>n<span class="o">)</span>o/<span class="o">(</span>q<span class="o">)</span>uit: n

Install the CUDA <span class="m">10</span>.0 Toolkit?
<span class="o">(</span>y<span class="o">)</span>es/<span class="o">(</span>n<span class="o">)</span>o/<span class="o">(</span>q<span class="o">)</span>uit: y

Enter Toolkit Location
 <span class="o">[</span> default is /usr/local/cuda-10.0 <span class="o">]</span>:

Do you want to install a symbolic link at /usr/local/cuda?
<span class="o">(</span>y<span class="o">)</span>es/<span class="o">(</span>n<span class="o">)</span>o/<span class="o">(</span>q<span class="o">)</span>uit: y

Install the CUDA <span class="m">10</span>.0 Samples?
<span class="o">(</span>y<span class="o">)</span>es/<span class="o">(</span>n<span class="o">)</span>o/<span class="o">(</span>q<span class="o">)</span>uit: n

Installing the CUDA Toolkit in /usr/local/cuda-10.0 ...

<span class="o">===========</span>
<span class="o">=</span> <span class="nv">Summary</span> <span class="o">=</span>
<span class="o">===========</span>

Driver:   Not Selected
Toolkit:  Installed in /usr/local/cuda-10.0
Samples:  Not Selected
</pre></div>


<p>可以按照自己的需要请配置下面的选项，比如你想学习使用 C/C++ 编写 CUDA 程序，可以安装 Samples。</p>
<p>注意：</p>
<blockquote>
<p>Please make sure that</p>
<ul>
<li>PATH includes /usr/local/cuda-10.0/bin</li>
<li>LD_LIBRARY_PATH includes /usr/local/cuda-10.0/lib64, or, add /usr/local/cuda-10.0/lib64 to /etc/ld.so.conf and run ldconfig as root</li>
</ul>
</blockquote>
<p>需要按照上面的指示<a href="../linux-command/#export">配置环境变量</a>，这里我以 <code class="codehilite">~/.zshrc</code> 为例：</p>
<div class="codehilite"><pre><span></span>nano ~/.zshrc

<span class="c1"># 添加下面的内容</span>
<span class="nb">export</span> <span class="nv">PATH</span><span class="o">=</span>/usr/local/cuda/bin:<span class="nv">$PATH</span>
<span class="nb">export</span> <span class="nv">LD_LIBRARY_PATH</span><span class="o">=</span>/usr/local/cuda/lib64:<span class="nv">$PATH</span>
</pre></div>


<h3 id="cudnn">安装 cuDNN</h3>
<p>同样，下载 cudnn-10.0-linux-x64-v7.6.0.64.tgz：</p>
<div class="codehilite"><pre><span></span>aria2c -x <span class="m">16</span> http://developer.download.nvidia.com/compute/redist/cudnn/v7.6.0/cudnn-10.0-linux-x64-v7.6.0.64.tgz
</pre></div>


<p>然后安装到 <code class="codehilite">/usr/local</code> 目录下：</p>
<div class="codehilite"><pre><span></span>sudo tar -xzf cudnn-10.0-linux-x64-v7.6.0.64.tgz -C /usr/local
</pre></div>


<h2 id="anaconda-python">安装 Anaconda 和 Python 库</h2>
<h3 id="anaconda">安装 Anaconda</h3>
<p>安装 Anaconda 和 Python 库的步骤都已经写在了 <a href="../python-environment/">Pyhton 环境</a>，这里仅仅展示相关命令：</p>
<div class="codehilite"><pre><span></span>aria2c -x <span class="m">16</span> https://mirrors.tuna.tsinghua.edu.cn/anaconda/archive/Anaconda3-2019.03-Linux-x86_64.sh
bash Anaconda3-2019.03-Linux-x86_64.sh

<span class="c1"># 回车，然后按 q 退出 EULA</span>

Do you accept the license terms? <span class="o">[</span>yes<span class="p">|</span>no<span class="o">]</span>
<span class="o">[</span>no<span class="o">]</span> &gt;&gt;&gt; yes

Anaconda3 will now be installed into this location:
/home/ypw/anaconda3

  - Press ENTER to confirm the location
  - Press CTRL-C to abort the installation
  - Or specify a different location below

<span class="o">[</span>/home/ypw/anaconda3<span class="o">]</span> &gt;&gt;&gt;
<span class="nv">PREFIX</span><span class="o">=</span>/home/ypw/anaconda3
installing: python-3.7.3-h0371630_0 ...
Python <span class="m">3</span>.7.3
installing: conda-env-2.6.0-1 ...
installing: blas-1.0-mkl ...
......
installing: anaconda-2019.03-py37_0 ...
installation finished.
Do you wish the installer to initialize Anaconda3
by running conda init? <span class="o">[</span>yes<span class="p">|</span>no<span class="o">]</span>
<span class="o">[</span>no<span class="o">]</span> &gt;&gt;&gt; yes

......

Thank you <span class="k">for</span> installing Anaconda3!
</pre></div>


<p>安装完成以后，如果你使用的是bash，就不需要配置环境变量，如果你使用的是zsh，那么你还需要<a href="../python-environment/#pei-zhi-huan-jing-bian-liang">配置环境变量</a>。</p>
<div class="codehilite"><pre><span></span>nano ~/.zshrc

<span class="c1"># 添加下面的内容</span>

<span class="c1"># &gt;&gt;&gt; conda initialize &gt;&gt;&gt;</span>
<span class="c1"># !! Contents within this block are managed by &#39;conda init&#39; !!</span>
<span class="nv">__conda_setup</span><span class="o">=</span><span class="s2">&quot;</span><span class="k">$(</span><span class="s1">&#39;/home/ypw/anaconda3/bin/conda&#39;</span> <span class="s1">&#39;shell.bash&#39;</span> <span class="s1">&#39;hook&#39;</span> <span class="m">2</span>&gt; /dev/null<span class="k">)</span><span class="s2">&quot;</span>
<span class="k">if</span> <span class="o">[</span> <span class="nv">$?</span> -eq <span class="m">0</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>
    <span class="nb">eval</span> <span class="s2">&quot;</span><span class="nv">$__conda_setup</span><span class="s2">&quot;</span>
<span class="k">else</span>
    <span class="k">if</span> <span class="o">[</span> -f <span class="s2">&quot;/home/ypw/anaconda3/etc/profile.d/conda.sh&quot;</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>
        . <span class="s2">&quot;/home/ypw/anaconda3/etc/profile.d/conda.sh&quot;</span>
    <span class="k">else</span>
        <span class="nb">export</span> <span class="nv">PATH</span><span class="o">=</span><span class="s2">&quot;/home/ypw/anaconda3/bin:</span><span class="nv">$PATH</span><span class="s2">&quot;</span>
    <span class="k">fi</span>
<span class="k">fi</span>
<span class="nb">unset</span> __conda_setup
<span class="c1"># &lt;&lt;&lt; conda initialize &lt;&lt;&lt;</span>
</pre></div>


<p>配置好以后，可以重启机器，或者使用 <code class="codehilite">source ~/.zshrc</code> <a href="../linux-command/#source">更新环境变量</a>。</p>
<h3 id="pip">配置 pip 源</h3>
<p>在使用 pip 的时候有可能因为网络原因导致安装过慢或失败，这时候可以配置一些 pip 源：</p>
<ul>
<li><a href="https://mirror.tuna.tsinghua.edu.cn/help/pypi/">https://mirror.tuna.tsinghua.edu.cn/help/ubuntu/</a></li>
<li><a href="https://opsx.alibaba.com/mirror">https://opsx.alibaba.com/mirror</a></li>
</ul>
<p>下面以清华大学开源软件镜像站为例：</p>
<div class="codehilite"><pre><span></span>pip config <span class="nb">set</span> global.index-url https://pypi.tuna.tsinghua.edu.cn/simple
</pre></div>


<h3 id="python">Python 库</h3>
<p>使用下面的命令安装<a href="../python-environment/#python-ku">常用 Python 库</a>：</p>
<div class="codehilite"><pre><span></span>pip install jupyter jupyter_contrib_nbextensions numpy pandas scikit-learn matplotlib opencv-python pillow tqdm torch torchvision tensorflow-gpu keras tensorboardx
</pre></div>


<h3 id="pytorch">测试 PyTorch</h3>
<div class="codehilite"><pre><span></span><span class="kn">import</span> <span class="nn">torch</span>
<span class="n">dummy</span> <span class="o">=</span> <span class="n">torch</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">5</span><span class="p">)</span><span class="o">.</span><span class="n">cuda</span><span class="p">()</span>
<span class="n">conv</span> <span class="o">=</span> <span class="n">torch</span><span class="o">.</span><span class="n">nn</span><span class="o">.</span><span class="n">Conv2d</span><span class="p">(</span><span class="n">in_channels</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">out_channels</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">kernel_size</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span><span class="o">.</span><span class="n">cuda</span><span class="p">()</span>
<span class="k">print</span><span class="p">(</span><span class="n">conv</span><span class="p">(</span><span class="n">dummy</span><span class="p">))</span>
</pre></div>


<p>期望输出：</p>
<div class="codehilite"><pre><span></span><span class="n">tensor</span><span class="p">([[[[</span><span class="mf">0.0443</span><span class="p">,</span> <span class="mf">0.0443</span><span class="p">,</span> <span class="mf">0.0443</span><span class="p">],</span>
          <span class="p">[</span><span class="mf">0.0443</span><span class="p">,</span> <span class="mf">0.0443</span><span class="p">,</span> <span class="mf">0.0443</span><span class="p">],</span>
          <span class="p">[</span><span class="mf">0.0443</span><span class="p">,</span> <span class="mf">0.0443</span><span class="p">,</span> <span class="mf">0.0443</span><span class="p">]]]],</span> <span class="n">device</span><span class="o">=</span><span class="s1">&#39;cuda:0&#39;</span><span class="p">,</span>
       <span class="n">grad_fn</span><span class="o">=&lt;</span><span class="n">CudnnConvolutionBackward</span><span class="o">&gt;</span><span class="p">)</span>
</pre></div>


<h3 id="tensorflow">测试 TensorFlow</h3>
<div class="codehilite"><pre><span></span>import tensorflow as tf
<span class="nv">mnist</span> <span class="o">=</span> tf.keras.datasets.mnist

<span class="o">(</span>x_train, y_train<span class="o">)</span>,<span class="o">(</span>x_test, y_test<span class="o">)</span> <span class="o">=</span> mnist.load_data<span class="o">()</span>
x_train, <span class="nv">x_test</span> <span class="o">=</span> x_train / <span class="m">255</span>.0, x_test / <span class="m">255</span>.0

<span class="nv">model</span> <span class="o">=</span> tf.keras.models.Sequential<span class="o">([</span>
  tf.keras.layers.Flatten<span class="o">(</span><span class="nv">input_shape</span><span class="o">=(</span><span class="m">28</span>, <span class="m">28</span><span class="o">))</span>,
  tf.keras.layers.Dense<span class="o">(</span><span class="m">512</span>, <span class="nv">activation</span><span class="o">=</span>tf.nn.relu<span class="o">)</span>,
  tf.keras.layers.Dropout<span class="o">(</span><span class="m">0</span>.2<span class="o">)</span>,
  tf.keras.layers.Dense<span class="o">(</span><span class="m">10</span>, <span class="nv">activation</span><span class="o">=</span>tf.nn.softmax<span class="o">)</span>
<span class="o">])</span>
model.compile<span class="o">(</span><span class="nv">optimizer</span><span class="o">=</span><span class="s1">&#39;adam&#39;</span>,
              <span class="nv">loss</span><span class="o">=</span><span class="s1">&#39;sparse_categorical_crossentropy&#39;</span>,
              <span class="nv">metrics</span><span class="o">=[</span><span class="s1">&#39;accuracy&#39;</span><span class="o">])</span>

model.fit<span class="o">(</span>x_train, y_train, <span class="nv">epochs</span><span class="o">=</span><span class="m">5</span><span class="o">)</span>
model.evaluate<span class="o">(</span>x_test, y_test<span class="o">)</span>
</pre></div>


<p>期望输出（注意里面的 GeForce GTX 1080 Ti） ：</p>
<div class="codehilite"><pre><span></span>&gt;&gt;&gt; model.fit(x_train, y_train, epochs=5)
2019-07-21 17:18:16.455944: I tensorflow/core/platform/cpu_feature_guard.cc:142] Your CPU supports instructions that this TensorFlow binary was not compiled to use: AVX2 FMA
2019-07-21 17:18:16.460577: I tensorflow/core/platform/profile_utils/cpu_utils.cc:94] CPU Frequency: 3599995000 Hz
2019-07-21 17:18:16.461013: I tensorflow/compiler/xla/service/service.cc:168] XLA service 0x5606e83e4f40 executing computations on platform Host. Devices:
2019-07-21 17:18:16.461032: I tensorflow/compiler/xla/service/service.cc:175]   StreamExecutor device (0): &lt;undefined&gt;, &lt;undefined&gt;
2019-07-21 17:18:16.462663: I tensorflow/stream_executor/platform/default/dso_loader.cc:42] Successfully opened dynamic library libcuda.so.1
2019-07-21 17:18:16.915819: I tensorflow/stream_executor/cuda/cuda_gpu_executor.cc:1005] successful NUMA node read from SysFS had negative value (-1), but there must be at least one NUMA node, so returning NUMA node zero
2019-07-21 17:18:16.916435: I tensorflow/compiler/xla/service/service.cc:168] XLA service 0x5606e78c9a40 executing computations on platform CUDA. Devices:
2019-07-21 17:18:16.916504: I tensorflow/compiler/xla/service/service.cc:175]   StreamExecutor device (0): GeForce GTX 1080 Ti, Compute Capability 6.1
2019-07-21 17:18:16.916782: I tensorflow/stream_executor/cuda/cuda_gpu_executor.cc:1005] successful NUMA node read from SysFS had negative value (-1), but there must be at least one NUMA node, so returning NUMA node zero
2019-07-21 17:18:16.918218: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1640] Found device 0 with properties:
name: GeForce GTX 1080 Ti major: 6 minor: 1 memoryClockRate(GHz): 1.683
pciBusID: 0000:0b:00.0
2019-07-21 17:18:16.918581: I tensorflow/stream_executor/platform/default/dso_loader.cc:42] Successfully opened dynamic library libcudart.so.10.0
2019-07-21 17:18:16.920971: I tensorflow/stream_executor/platform/default/dso_loader.cc:42] Successfully opened dynamic library libcublas.so.10.0
2019-07-21 17:18:16.922961: I tensorflow/stream_executor/platform/default/dso_loader.cc:42] Successfully opened dynamic library libcufft.so.10.0
2019-07-21 17:18:16.923461: I tensorflow/stream_executor/platform/default/dso_loader.cc:42] Successfully opened dynamic library libcurand.so.10.0
2019-07-21 17:18:16.926265: I tensorflow/stream_executor/platform/default/dso_loader.cc:42] Successfully opened dynamic library libcusolver.so.10.0
2019-07-21 17:18:16.928450: I tensorflow/stream_executor/platform/default/dso_loader.cc:42] Successfully opened dynamic library libcusparse.so.10.0
2019-07-21 17:18:16.932250: I tensorflow/stream_executor/platform/default/dso_loader.cc:42] Successfully opened dynamic library libcudnn.so.7
2019-07-21 17:18:16.932341: I tensorflow/stream_executor/cuda/cuda_gpu_executor.cc:1005] successful NUMA node read from SysFS had negative value (-1), but there must be at least one NUMA node, so returning NUMA node zero
2019-07-21 17:18:16.932899: I tensorflow/stream_executor/cuda/cuda_gpu_executor.cc:1005] successful NUMA node read from SysFS had negative value (-1), but there must be at least one NUMA node, so returning NUMA node zero
2019-07-21 17:18:16.933392: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1763] Adding visible gpu devices: 0
2019-07-21 17:18:16.933426: I tensorflow/stream_executor/platform/default/dso_loader.cc:42] Successfully opened dynamic library libcudart.so.10.0
2019-07-21 17:18:16.934335: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1181] Device interconnect StreamExecutor with strength 1 edge matrix:
2019-07-21 17:18:16.934353: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1187]      0
2019-07-21 17:18:16.934363: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1200] 0:   N
2019-07-21 17:18:16.934444: I tensorflow/stream_executor/cuda/cuda_gpu_executor.cc:1005] successful NUMA node read from SysFS had negative value (-1), but there must be at least one NUMA node, so returning NUMA node zero
2019-07-21 17:18:16.934988: I tensorflow/stream_executor/cuda/cuda_gpu_executor.cc:1005] successful NUMA node read from SysFS had negative value (-1), but there must be at least one NUMA node, so returning NUMA node zero
2019-07-21 17:18:16.935504: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1326] Created TensorFlow device (/job:localhost/replica:0/task:0/device:GPU:0 with 10481 MB memory) -&gt; physical GPU (device: 0, name: GeForce GTX 1080 Ti, pci bus id: 0000:0b:00.0, compute capability: 6.1)
Epoch 1/5
2019-07-21 17:18:17.663035: I tensorflow/stream_executor/platform/default/dso_loader.cc:42] Successfully opened dynamic library libcublas.so.10.0
60000/60000 [==============================] - 3s 49us/sample - loss: 0.2209 - acc: 0.9344
Epoch 2/5import torch
x = torch.rand(5, 3)
print(x)
60000/60000 [==============================] - 2s 39us/sample - loss: 0.0968 - acc: 0.9707
Epoch 3/5
60000/60000 [==============================] - 2s 38us/sample - loss: 0.0696 - acc: 0.9779
Epoch 4/5
60000/60000 [==============================] - 2s 38us/sample - loss: 0.0537 - acc: 0.9826
Epoch 5/5
60000/60000 [==============================] - 2s 38us/sample - loss: 0.0428 - acc: 0.9863
&lt;tensorflow.python.keras.callbacks.History object at 0x7f4ece4a2278&gt;
&gt;&gt;&gt; model.evaluate(x_test, y_test)
10000/10000 [==============================] - 0s 24us/sample - loss: 0.0698 - acc: 0.9804
[0.06983174340333789, 0.9804]
</pre></div>
                
                  
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid">
        
          <a href="../python-environment/" title="Python 环境" class="md-flex md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-back md-footer-nav__button"></i>
            </div>
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  上一页
                </span>
                Python 环境
              </span>
            </div>
          </a>
        
        
          <a href="../ubuntu-environment/" title="Ubuntu 环境" class="md-flex md-footer-nav__link md-footer-nav__link--next" rel="next">
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  下一页
                </span>
                Ubuntu 环境
              </span>
            </div>
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-forward md-footer-nav__button"></i>
            </div>
          </a>
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
          <div class="md-footer-copyright__highlight">
            杨培文
          </div>
        
        powered by
        <a href="https://www.mkdocs.org">MkDocs</a>
        and
        <a href="https://squidfunk.github.io/mkdocs-material/">
          Material for MkDocs</a>
      </div>
      
  <div class="md-footer-social">
    <link rel="stylesheet" href="../assets/fonts/font-awesome.css">
    
      <a href="https://github.com/ypwhs" class="md-footer-social__link fa fa-github"></a>
    
      <a href="https://www.zhihu.com/people/yangpw" class="md-footer-social__link fa fa-book"></a>
    
      <a href="https://ypw.io" class="md-footer-social__link fa fa-globe"></a>
    
      <a href="https://www.linkedin.com/in/ypwhs/" class="md-footer-social__link fa fa-linkedin"></a>
    
  </div>

    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../assets/javascripts/application.245445c6.js"></script>
      
        
        
          
          <script src="../assets/javascripts/lunr/lunr.stemmer.support.js"></script>
          
            
              
                <script src="../assets/javascripts/lunr/tinyseg.js"></script>
              
              
                <script src="../assets/javascripts/lunr/lunr.ja.js"></script>
              
            
          
          
        
      
      <script>app.initialize({version:"1.0.4",url:{base:".."}})</script>
      
    
  </body>
</html>